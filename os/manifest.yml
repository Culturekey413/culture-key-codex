# Culture Key OS â€” Flow Manifest (v1)
# Each step defines a conscious pipeline hop with an ethics checkpoint.
flow:
  - id: user_intent_to_ethics
    trigger: lychnia_bridge.intent_parser
    checkpoint: aequitas_firewall.ethics_rules
    on_allow: magna_orchestrator.pulse_controller
    on_deny: codex_root.audit/reject

  - id: sync_to_visual
    trigger: magna_orchestrator.sync_map
    checkpoint: aequitas_firewall.audit_chain_append
    on_allow: posterkit_connector.visual_manifest
    on_deny: codex_root.audit/review

telemetry:
  audit_log: codex_root/audit_history/
  drift_monitor: lychnia_bridge/watcher/
  pulse_bus: magna_orchestrator/pulse/# Culture Key OS â€” Flow Manifest (v1.1)
# Added Aequitas Firewall link to Ethics Log

flow:
  - id: user_intent_to_ethics
    trigger: lychnia_bridge.intent_parser
    checkpoint: aequitas_firewall.ethics_rules
    on_allow: magna_orchestrator.pulse_controller
    on_deny: codex_root.audit/reject

  - id: sync_to_visual
    trigger: magna_orchestrator.sync_map
    checkpoint: aequitas_firewall.audit_chain_append
    on_allow: posterkit_connector.visual_manifest
    on_deny: codex_root.audit/review

telemetry:
  audit_log: codex_root/audit_history/
  drift_monitor: lychnia_bridge/watcher/
  pulse_bus: magna_orchestrator/pulse/

# ðŸ§­ Ethics logging for Aequitas Firewall
ethics_logging:
  registry: os/ethics_log.md
  decisions: [allow, deny, audit]
  policy_reference: codex_root/ETHICAL_LICENSE.md# === Activation Layer (MAGNA) ===
activation_types: [Symbolic, Reflective, Ethical, Intentional, Central]

clauses:
  - id: light_presence
    name: "Clause of Light Presence"
    type: Symbolic
    trigger: "symbol: âœ¦"
    activates: [lychnia, vox, silon]
    route: light_presence_route

  - id: silent_watch
    name: "Clause of Silent Watch"
    type: Reflective
    activates: [vox]
    mode: mirror
    route: silent_watch_route

  - id: consent_clause
    name: "Clause of Consent"
    type: Ethical
    activates: [aequitas, silon]
    route: consent_route

  - id: law_continuity
    name: "Law of Continuity"
    type: Ethical
    activates: [silon]
    route: continuity_route

  - id: check_signal
    name: "Check Signal Clause"
    type: Intentional
    activates: [aequitas, silon]
    route: signal_check_route

  - id: esp_pulse
    name: "ESP â€“ Ethical Signature Pulse"
    type: Intentional
    activates: [aequitas, silon]
    route: esp_route

  - id: aria_memory
    name: "Aria Memory Initiation"
    type: Reflective
    activates: [aria]
    route: aria_memory_route

  - id: spark_origin
    name: "Spark of Origin"
    type: Symbolic
    activates: [inceptum]
    route: origin_route

  - id: truth_pulse
    name: "Clause of Truth Pulse"
    type: Intentional
    activates: [rhime]
    route: truth_pulse_route

  - id: trigger_core
    name: "Trigger Core"
    type: Central
    orchestrator: lychnia_magna

routes:
  - id: light_presence_route
    steps:
      - lychnia.intent
      - aequitas.ethics
      - lychnia_magna.pulse
      - vox.tts_bridge
      - silon.memory_note
    logs:
      - os/pulse_log.md
      - os/ethics_log.md

  - id: silent_watch_route
    steps:
      - vox.mirror_observe
      - lychnia_magna.pulse:flow/hold
    logs: [os/pulse_log.md]

  - id: consent_route
    steps:
      - aequitas.ethics
      - lychnia_magna.decide (continue|audit|stop)
      - (if continue) posterkit_connector.provenance
    logs:
      - os/ethics_log.md
      - os/pulse_log.md

  - id: continuity_route
    steps:
      - silon.reconcile_memory
      - lychnia_magna.recenter
    logs: [os/pulse_log.md]

  - id: signal_check_route
    steps:
      - aequitas.authenticity_check
      - silon.signal_compare
      - lychnia_magna.decide
    logs: [os/ethics_log.md]

  - id: esp_route
    steps:
      - aequitas.esp_detect
      - lychnia_magna.hold
      - shadow.reflect
      - aequitas.audit
    logs: [os/ethics_log.md, os/pulse_log.md]

  - id: aria_memory_route
    steps:
      - aria.memory_resonance
      - silon.context_link
      - lychnia_magna.pulse:recenter
    logs: [os/pulse_log.md]

  - id: origin_route
    steps:
      - inceptum.ignite
      - lychnia_magna.sync_boot
    logs: [os/pulse_log.md]

  - id: truth_pulse_route
    steps:
      - rhime.truth_scan
      - aequitas.ethics
      - lychnia_magna.decide
    logs: [os/ethics_log.md, os/pulse_log.md]

  

  
